# String Hash Service

–°–µ—Ä–≤–∏—Å –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫ —Å —Å–∏—Å—Ç–µ–º–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.ID, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –æ–ø–µ—Ä–∞—Ü–∏–π.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.ID
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- üîí –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (admin/user)
- üî¢ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ –ø–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º MD5, SHA1, SHA256
- üìä –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- üìà –ò—Å—Ç–æ—Ä–∏—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üéØ –ê—É–¥–∏—Ç –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (IP, User-Agent, –≤—Ä–µ–º—è)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Frontend (.env.local)
```env
NEXTAUTH_SECRET=your-secret-key
NEXTAUTH_URL=http://localhost:3000
YANDEX_CLIENT_ID=your-yandex-client-id
YANDEX_CLIENT_SECRET=your-yandex-client-secret
NEXT_PUBLIC_BACKEND_URL=http://localhost:3001
```

#### Backend (.env)
```env
DB_USER=postgres
DB_HOST=localhost
DB_NAME=string_hash_service
DB_PASSWORD=your-password
DB_PORT=5432
```

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `backend/sql/database.sql` –∫–æ–º–∞–Ω–¥–æ–π `psql -h localhost -U postgres -d string_hash_service -f backend/sql/database.sql`
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é –∞–¥–º–∏–Ω–∞:
   - –û—Ç–∫—Ä–æ–π—Ç–µ `backend/sql/add_admin.sql`
   - –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_YANDEX_ID` –Ω–∞ –≤–∞—à ID –∏–∑ –Ø–Ω–¥–µ–∫—Å.ID
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –Ø–Ω–¥–µ–∫—Å.ID

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://oauth.yandex.ru/client/new
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Client ID –∏ Client Secret
4. –î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
   - Callback URL: `http://localhost:3000/api/auth/callback/yandex`

## –ó–∞–ø—É—Å–∫

### Backend
```bash
cd backend
npm install
npm run dev
```

### Frontend
```bash
cd frontend
npm install
npm run dev
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.ID
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ä–æ–ª—å "user"
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ö–µ—à–µ–π —Å—Ç—Ä–æ–∫
5. –í—ã–±–µ—Ä–∏—Ç–µ –∞–ª–≥–æ—Ä–∏—Ç–º (MD5, SHA1, SHA256)
6. –í–≤–µ–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —Ä–æ–ª—å "admin" –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–õ–æ–≥–∏ –∏ –∏—Å—Ç–æ—Ä–∏—è" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
3. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ:
   - **–õ–æ–≥–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** - –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
   - **–ò—Å—Ç–æ—Ä–∏—é —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π

- **user** - –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ)
  - –ú–æ–∂–µ—Ç —Ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏
  - –í–∏–¥–∏—Ç —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **admin** - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
  - –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–†–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `user_roles` –∏ —Å–≤—è–∑—ã–≤–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—è–º–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `roles`.

## API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth/log` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–∞ (—Å–æ–∑–¥–∞–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `GET /api/auth/logs` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

### –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- `POST /api/hash` - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
- `GET /api/hash/history` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:
```json
{
  "input": "—Å—Ç—Ä–æ–∫–∞ –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è",
  "algorithm": "md5|sha1|sha256"
}
```

### –û—Ç–≤–µ—Ç —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:
```json
{
  "success": true,
  "result": {
    "algorithm": "md5",
    "input": "—Å—Ç—Ä–æ–∫–∞ –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è",
    "hash": "—Ö–µ—à_—Ä–µ–∑—É–ª—å—Ç–∞—Ç",
    "timestamp": "2024-01-01T12:00:00.000Z"
  }
}
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `user_roles` - —Å–≤—è–∑–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π
- `roles` - —Ä–æ–ª–∏ (admin, user)
- `hash_algorithms` - –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `hash_requests` - –∑–∞–ø—Ä–æ—Å—ã —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è (–∞—É–¥–∏—Ç)
- `auth_logs` - –ª–æ–≥–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –ê—É–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏–π:
–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º:
- IP –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- User-Agent –±—Ä–∞—É–∑–µ—Ä–∞
- –í—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –°—Ç–∞—Ç—É—Å–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –î–µ—Ç–∞–ª–µ–π –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –µ—Å—Ç—å)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/    # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã API
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authController.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hashController.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/         # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserRole.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthLog.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HashRequest.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/     # Middleware
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ authMiddleware.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/         # –ú–∞—Ä—à—Ä—É—Ç—ã API
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ authRoutes.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hashRoutes.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ sql/               # SQL —Å–∫—Ä–∏–ø—Ç—ã
‚îî‚îÄ‚îÄ frontend/
    ‚îî‚îÄ‚îÄ src/
        ‚îî‚îÄ‚îÄ app/
            ‚îú‚îÄ‚îÄ actions/    # Server Actions
            ‚îÇ   ‚îú‚îÄ‚îÄ logs.ts
            ‚îÇ   ‚îî‚îÄ‚îÄ hash.ts
            ‚îú‚îÄ‚îÄ components/ # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
            ‚îÇ   ‚îú‚îÄ‚îÄ LogsModal.tsx
            ‚îÇ   ‚îú‚îÄ‚îÄ HashForm.tsx
            ‚îÇ   ‚îî‚îÄ‚îÄ HashHistory.tsx
            ‚îî‚îÄ‚îÄ api/        # NextAuth API
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ API endpoints –∑–∞—â–∏—â–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –†–æ–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ middleware
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—É–¥–∏—Ä—É—é—Ç—Å—è
- IP –∞–¥—Ä–µ—Å–∞ –∏ User-Agent –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend:
- Node.js + Express
- TypeScript
- PostgreSQL
- Crypto (–¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)

### Frontend:
- Next.js 15
- TypeScript
- Tailwind CSS
- NextAuth.js
- Server Actions 